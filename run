#!/bin/bash
mkdir q exe 2> /dev/null
ls memory || dd if=/dev/zero of=memory bs=1024 count=1048576
python3 ../compasm/mcasm.py ../ozcomp/games/dino_chrome.asm ./exe/DINO.EXE
python3 ../compasm/mcasm.py ../ozcomp/games/snake.asm ./exe/SNAKE.EXE
gcc -c ../ozcomp/OzEmu/libs/kbd.c; g++ -o a.out ../ozcomp/OzEmu/main.cpp kbd.o -lc -lncurses -lpthread
mkfs.fat -R 3 memory
sudo mount memory q
sudo mkdir q/dir.COM
sudo mkdir q/dirk.COM
sudo mkdir q/DIRECT
sudo touch q/123.COM
sudo touch q/DIRECT/file.COM
sudo touch q/File
sudo touch q/.COM
sudo touch q/qwww.COM
sudo touch q/dsd.COM
sudo cp exe/* q/DIRECT/
sudo cp exe/* q/
sudo umount q
python3 ../compasm/mcasm.py shell.asm mem 62 
python3 collector.py mem memory 
rm *.o 2> /dev/null
mkfifo pipe
aplay -q -f cd < pipe & ./a.out
